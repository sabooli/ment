{"ast":null,"code":"import { elementChildren } from '../../shared/utils.js';\nexport default function Parallax(_ref) {\n  var swiper = _ref.swiper,\n    extendParams = _ref.extendParams,\n    on = _ref.on;\n  extendParams({\n    parallax: {\n      enabled: false\n    }\n  });\n  var setTransform = function setTransform(el, progress) {\n    var rtl = swiper.rtl;\n    var rtlFactor = rtl ? -1 : 1;\n    var p = el.getAttribute('data-swiper-parallax') || '0';\n    var x = el.getAttribute('data-swiper-parallax-x');\n    var y = el.getAttribute('data-swiper-parallax-y');\n    var scale = el.getAttribute('data-swiper-parallax-scale');\n    var opacity = el.getAttribute('data-swiper-parallax-opacity');\n    var rotate = el.getAttribute('data-swiper-parallax-rotate');\n    if (x || y) {\n      x = x || '0';\n      y = y || '0';\n    } else if (swiper.isHorizontal()) {\n      x = p;\n      y = '0';\n    } else {\n      y = p;\n      x = '0';\n    }\n    if (x.indexOf('%') >= 0) {\n      x = \"\".concat(parseInt(x, 10) * progress * rtlFactor, \"%\");\n    } else {\n      x = \"\".concat(x * progress * rtlFactor, \"px\");\n    }\n    if (y.indexOf('%') >= 0) {\n      y = \"\".concat(parseInt(y, 10) * progress, \"%\");\n    } else {\n      y = \"\".concat(y * progress, \"px\");\n    }\n    if (typeof opacity !== 'undefined' && opacity !== null) {\n      var currentOpacity = opacity - (opacity - 1) * (1 - Math.abs(progress));\n      el.style.opacity = currentOpacity;\n    }\n    var transform = \"translate3d(\".concat(x, \", \").concat(y, \", 0px)\");\n    if (typeof scale !== 'undefined' && scale !== null) {\n      var currentScale = scale - (scale - 1) * (1 - Math.abs(progress));\n      transform += \" scale(\".concat(currentScale, \")\");\n    }\n    if (rotate && typeof rotate !== 'undefined' && rotate !== null) {\n      var currentRotate = rotate * progress * -1;\n      transform += \" rotate(\".concat(currentRotate, \"deg)\");\n    }\n    el.style.transform = transform;\n  };\n  var setTranslate = function setTranslate() {\n    var el = swiper.el,\n      slides = swiper.slides,\n      progress = swiper.progress,\n      snapGrid = swiper.snapGrid;\n    elementChildren(el, '[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]').forEach(function (subEl) {\n      setTransform(subEl, progress);\n    });\n    slides.forEach(function (slideEl, slideIndex) {\n      var slideProgress = slideEl.progress;\n      if (swiper.params.slidesPerGroup > 1 && swiper.params.slidesPerView !== 'auto') {\n        slideProgress += Math.ceil(slideIndex / 2) - progress * (snapGrid.length - 1);\n      }\n      slideProgress = Math.min(Math.max(slideProgress, -1), 1);\n      slideEl.querySelectorAll('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale], [data-swiper-parallax-rotate]').forEach(function (subEl) {\n        setTransform(subEl, slideProgress);\n      });\n    });\n  };\n  var setTransition = function setTransition() {\n    var duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : swiper.params.speed;\n    var el = swiper.el;\n    el.querySelectorAll('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]').forEach(function (parallaxEl) {\n      var parallaxDuration = parseInt(parallaxEl.getAttribute('data-swiper-parallax-duration'), 10) || duration;\n      if (duration === 0) parallaxDuration = 0;\n      parallaxEl.style.transitionDuration = \"\".concat(parallaxDuration, \"ms\");\n    });\n  };\n  on('beforeInit', function () {\n    if (!swiper.params.parallax.enabled) return;\n    swiper.params.watchSlidesProgress = true;\n    swiper.originalParams.watchSlidesProgress = true;\n  });\n  on('init', function () {\n    if (!swiper.params.parallax.enabled) return;\n    setTranslate();\n  });\n  on('setTranslate', function () {\n    if (!swiper.params.parallax.enabled) return;\n    setTranslate();\n  });\n  on('setTransition', function (_swiper, duration) {\n    if (!swiper.params.parallax.enabled) return;\n    setTransition(duration);\n  });\n}","map":null,"metadata":{},"sourceType":"module"}