{"ast":null,"code":"import { elementTransitionEnd } from './utils.js';\nexport default function effectVirtualTransitionEnd(_ref) {\n  var swiper = _ref.swiper,\n    duration = _ref.duration,\n    transformElements = _ref.transformElements,\n    allSlides = _ref.allSlides;\n  var activeIndex = swiper.activeIndex;\n  var getSlide = function getSlide(el) {\n    if (!el.parentElement) {\n      // assume shadow root\n      var slide = swiper.slides.filter(function (slideEl) {\n        return slideEl.shadowEl && slideEl.shadowEl === el.parentNode;\n      })[0];\n      return slide;\n    }\n    return el.parentElement;\n  };\n  if (swiper.params.virtualTranslate && duration !== 0) {\n    var eventTriggered = false;\n    var transitionEndTarget;\n    if (allSlides) {\n      transitionEndTarget = transformElements;\n    } else {\n      transitionEndTarget = transformElements.filter(function (transformEl) {\n        var el = transformEl.classList.contains('swiper-slide-transform') ? getSlide(transformEl) : transformEl;\n        return swiper.getSlideIndex(el) === activeIndex;\n      });\n    }\n    transitionEndTarget.forEach(function (el) {\n      elementTransitionEnd(el, function () {\n        if (eventTriggered) return;\n        if (!swiper || swiper.destroyed) return;\n        eventTriggered = true;\n        swiper.animating = false;\n        var evt = new window.CustomEvent('transitionend', {\n          bubbles: true,\n          cancelable: true\n        });\n        swiper.wrapperEl.dispatchEvent(evt);\n      });\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}